为灵活进行实验，实验中一些数据是使用json灵活配置的。如下：

## 对话脚本

见server/script下的info.json与example.json，前者指示了存在的脚本及名称，后者是一个详细的对话脚本。以该文件为例：

```
{
    "sections": [
        {
            "name": "ask_weather",
            "description": "询问天气"
        },
        {
            "name": "ask_time",
            "description": "询问时间"
        }
    ],

    "ask_weather": [{
            "name": "天气",
            "text": "今天晴转多云，零下12度到零下2度。"
        }, {
            "name": "详细天气",
            "text": "北京今天晴转多云，零下12度到零下2度，降温4度，东南风2级，空气质量优。"
        }
    ],
    "ask_time": [
        {
            "name": "时间",
            "text": "现在是_{time}_",
            "img": "/images/time_icon.png"
        }
    ]
}
```

sections表明这个脚本由ask weather, ask time两个部分组成，之后的几个部分显示了各部分中具体的回复项，每个回复项中，name表示wizard端看到的简称，text则是会转为语音向用户播报的文字内容。wizard将可以选择一个或多个回复项，组成想要回复的句子。此外，text中的`_{}_`格式表明这是一个需要wizard自己填写的slot，会在被选中时产生一个input元素供填写。

由于wizard填写slot时，对话会产生明显延迟，比较好的方法是事先准备好可选项。

## 唤醒设备管理

见server/util/device-manager.js，该文件包含了准许接入的设备列表，可以自由地进行修改。设备通过简单的协议和服务器端通信：

+ 首先和服务器端建立socket连接
+ 向服务器端发送设备名称(id字段)
+ 对输入设备，向服务器发送'1'表示其被唤醒，对反馈设备，服务器对其发送'1'表示其开始反馈，发送'0'表示其反馈结束。

server/devices/fake-device.js是一个将回车键用于触发的简单设备示例。

输入设备唤醒时，将触发其对应的反馈设备，其对应关系可在localhost:7575/devices界面进行实时的设置。

考虑到设备不会频繁地发送数据，也不会频繁地进行唤醒，此处的设计非常简化。

其中，反馈设备分为两种：持续性的和非持续性的(continuing属性)。如振动、语音是非持续性的，因为一次振动/语音一次应答就已经完成，还有一些则是持续性的，如类似siri的动画显示，需要在对话结束后返回原状。而何时对话结束，这是由控制对话流程的wizard来决定的。因此，持续性的反馈设备被触发时，将告知wizard进入持续唤醒状态，需要其手动结束触发。